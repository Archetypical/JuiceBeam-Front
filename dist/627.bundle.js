(self.webpackChunkJuiceBeam_Front=self.webpackChunkJuiceBeam_Front||[]).push([[627],{74998:(t,e,n)=>{"use strict";n.d(e,{DI:()=>a,O$:()=>y,UI:()=>g,cS:()=>v,xH:()=>h,WH:()=>f,KN:()=>m});var r=n(35466);function a(){return r.createElement("canvas",{id:"confetti-canvas"})}var i=["DodgerBlue","OliveDrab","Gold","Pink","SlateBlue","LightBlue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],o=!1,c=null,s=[],u=0;function l(t,e,n){return t.colors=i[Math.random()*i.length|0],t.x=Math.random()*e,t.y=Math.random()*n-n,t.diameter=10*Math.random()+5,t.tilt=10*Math.random()-10,t.tiltAngleIncrement=.07*Math.random()+.05,t.tiltAngle=0,t}function h(){var t=window.innerWidth,e=window.innerHeight;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,16.6666667)},null==document.querySelector("#confetti-canvas")&&(document.createElement("canvas"),n.setAttribute("id","confetti-canvas"),document.getElementById("effect-container").appendChild(n));var n=document.querySelector("#confetti-canvas");n.width=t,n.height=e,window.addEventListener("resize",(function(){n.width=window.innerWidth,n.height=window.innerHeight}),!0);for(var r=n.getContext("2d");s.length<150;)s.push(l({},t,e));o=!0,null===c&&function t(){r.clearRect(0,0,window.innerWidth,window.innerHeight),0===s.length?c=null:(function(){var t,e=window.innerWidth,n=window.innerHeight;u+=.01;for(var r=0;r<s.length;r++)t=s[r],!o&&t.y<-15?t.y=n+100:(t.tiltAngle+=t.tiltAngleIncrement,t.x+=Math.sin(u),t.y+=.5*(Math.cos(u)+t.diameter+2),t.tilt=15*Math.sin(t.tiltAngle)),(t.x>e+20||t.x<-20||t.y>n)&&(o&&s.length<=150?l(t,e,n):(s.splice(r,1),r--))}(),function(t){for(var e,n,r=0;r<s.length;r++)e=s[r],t.beginPath(),t.lineWidth=e.diameter,t.strokeStyle=e.colors,n=e.x+e.tilt,t.moveTo(n+e.diameter/2,e.y),t.lineTo(n,e.y+e.tilt+e.diameter/2),t.stroke()}(r),c=requestAnimFrame(t))}()}function f(){o=!1}var p=n(55043),d="Welcome to Juicebeam!";function m(t,e){console.log(e,t),null!=t&&null!=e?t!={}&&e!={}&&(d=t+" activated the "+e+" event!"):setTimeout((function(){d="Welcome to JuiceBeam!"}),2e3)}function g(){var t=r.useState(!1),e=(0,p.Z)(t,2),n=e[0],a=e[1],i=d;function o(){d!=i&&a(!n),setTimeout((function(){o()}),1e3)}function c(){return d}return(0,r.useEffect)((function(){console.log("Reloaded Ticker"),o()}),[d]),r.createElement(r.Fragment,null,r.createElement("div",{className:"ticker-title"},r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam"),r.createElement("span",null,"JuiceBeam")),r.createElement("div",{className:"ticker"},r.createElement("span",{id:"TickerText"},r.createElement(c,null))))}function y(){return r.createElement("video",{width:"100%",height:"100%",id:"fire-vid"},r.createElement("source",{src:"../src/images/fire_VP8.webm",type:"video/webm"}))}function v(t){var e=document.querySelector("#fire-vid");t?e.play():(e.currentTime=0,e.pause())}},97195:(t,e,n)=>{"use strict";n.d(e,{z:()=>o});var r=n(3862),a=n(68227),i=n(43267),o={getAllUsers:c,getSortedUsers:s,getSortedVideos:u,getSettings:l,updateSettings:function(t){a.d$.updateSettings(t).then((function(){return i.h.dispatch(l)})).then((function(){t.channelName&&i.h.dispatch(u(i.h.getState().videos.params))}))},updateUser:function(t,e){a.d$.updateUser(t).then((function(){return i.h.dispatch(c)})).then((function(){return i.h.dispatch(s(e))}))},addNewUser:function(t){return function(e){e(function(t){return{type:r.A.ADDNEW_REQUEST,params:t}}(t)),a.d$.addUser(t).then((function(n){e(function(t){return{type:r.A.ADDNEW_SUCCESS,user:t}}(n)),e(c),e(s(t))}),(function(t){return e(function(t){return{type:r.A.ADDNEW_FAILURE,error:t}}(t.toString()))}))}},deleteUser:function(t,e){a.d$.deleteUser(t).then((function(){return i.h.dispatch(c)})).then((function(){return i.h.dispatch(s(e))}))}};function c(){return function(t){a.d$.getAllUsers().then((function(e){return t(function(t){return{type:r.A.GETALL_SUCCESS,users:t}}(e))}),(function(e){return t(function(t){return{type:r.A.GETALL_FAILURE,error:t}}(e.toString()))}))}}function s(t){return function(e){a.d$.getSortedUsers(t).then((function(t){return e(function(t){return{type:r.A.GETSORTED_SUCCESS,users:t}}(t))}),(function(t){return e(function(t){return{type:r.A.GETSORTED_FAILURE,error:t}}(t.toString()))}))}}function u(t){return function(e){a.d$.getSortedVideos(t).then((function(t){return e(function(t){return{type:"GETVIDEOS_SUCCESS",videos:t}}(t))}),(function(t){return e(function(t){return{type:"GETVIDEOS__FAILURE",error:t}}(t.toString()))}))}}function l(){a.d$.getSettings().then((function(t){return i.h.dispatch(function(t){return{type:"GETSETTINGS_SUCCESS",settings:t}}(t))}),(function(t){return i.h.dispatch(function(t){return{type:"GETSETTINGS__FAILURE",error:t}}(t.toString()))}))}},81751:(t,e,n)=>{"use strict";n.d(e,{zR:()=>ot.z,Iu:()=>a,wd:()=>tt,hI:()=>d});var r=n(3862),a={success:function(t){return{type:r.k.SUCCESS,message:t}},error:function(t){return{type:r.k.ERROR,message:t}},clear:function(){return{type:r.k.CLEAR}}},i=n(54390),o=n(84264),c=n.n(o),s=n(68227),u=n(43267),l=n(91974),h=n.n(l),f=n(10714),p=n(74998),d={login:function(t,e,n,o,l){return function(){var o=(0,i.Z)(c().mark((function o(l){return c().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:l((p={username:t},{type:r.A.LOGIN_REQUEST,user:p})),s.W4.login(t,e).then(function(){var t=(0,i.Z)(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(h(e));case 2:u.m8.push(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),function(){var t=(0,i.Z)(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(f(e.toString()));case 2:return t.next=4,l(a.error(e.toString()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return o.stop()}var p}),o)})));return function(t){return o.apply(this,arguments)}}();function h(t){return o(!0),l(!1),{type:r.A.LOGIN_SUCCESS,user:t}}function f(t){return{type:r.A.LOGIN_FAILURE,error:t}}},twitchAuth:function(){var t="https://id.twitch.tv/oauth2/authorize?client_id=2ycvvf2zsvwyvso2b8q9i9mjajs9yd&redirect_uri=http://localhost:8080"+location.pathname+"&response_type=token&scope=user:read:email%20user:read:subscriptions";window.location.replace(t)},twitchHandler:function(){var t=window.location.hash.substr(1),e=new URLSearchParams(t).get("access_token");return function(t){s.W4.twitchHandler(e).then((function(e){var n;t((n=e,{type:r.A.LOGIN_SUCCESS,user:n})),t(a.success(e.toString()))}),(function(e){t(function(t){return{type:r.A.LOGIN_FAILURE,error:t}}(e.toString())),t(a.error(e.toString()))}))}},logout:function(){return s.W4.logout(),{type:r.A.LOGOUT}},resetPassword:function(t,e,n){var i=JSON.parse(localStorage.getItem("user")).username;return function(o){var c;o((c={username:i},{type:r.A.RESET_REQUEST,user:c})),n!=e?o(a.error("Passwords do not match")):s.W4.resetPassword(t,e).then((function(t){o(function(t){return{type:r.A.RESET_SUCCESS,response:t}}(t)),o(a.success(t.toString()))}),(function(t){o(function(t){return{type:r.A.RESET_FAILURE,error:t}}(t.toString())),o(a.error(t.toString()))}))}},register:function(t){return function(e){e(function(t){return{type:r.A.REGISTER_REQUEST,user:t}}(t)),s.W4.register(t).then((function(t){e({type:r.A.REGISTER_SUCCESS,user:void 0}),e(a.success("Registration successful"))}),(function(t){e(function(t){return{type:r.A.REGISTER_FAILURE,error:t}}(t.toString())),e(a.error(t.toString()))}))}},getEvents:function(){return s.W4.getEvents()},getVideos:function(t){return s.W4.getVideoData(t)},runEvent:function(t){return s.W4.runEvent(t)},checkBalance:function(t){return s.W4.checkBalance(t)},updateRank:function(t){var e=JSON.parse(localStorage.getItem("user")).username;return function(n){var i;n((i={username:e},{type:r.A.RANKUPDATE_REQUEST,user:i})),s.W4.updateRank().then((function(e){n(a.success("Your rank was updated successfully!")),t()}),(function(t){n(function(t){return{type:r.A.RANKUPDATE_FAILURE,error:t}}(t.toString())),n(a.error(t.toString()))}))}},adminVerify:function(){return s.W4.adminVerify()},userVerify:function(){return s.W4.userVerify()},updateLocalUser:m,notifyListener:function(){var t="".concat(h().apiUrl,"/notify"),e=(0,f.ZP)(t);console.log("Waiting for new notifications from server"),e.on("connect",(function(){console.log("CONNECTED")})),e.on("event",(function(t){if(console.log(t),"off"!=t.name){switch(t.event){case"Confetti":(0,p.xH)();break;case"Fire":(0,p.cS)(!0)}(0,p.KN)(t.name,t.event)}})),e.on("off",(function(){(0,p.WH)(),(0,p.cS)(!1),u.h.dispatch(m()),(0,p.KN)(null,null)})),e.on("disconnect",(function(){console.log("LOST CONNECTION")}))}};function m(t){var e=JSON.parse(localStorage.getItem("user")).username;return function(n){var a;n((a={username:e},{type:r.A.UPDATE_REQUEST,user:a})),localStorage.getItem("user")?s.W4.updateLocalUser().then((function(e){n(function(t){return{type:r.A.UPDATE_SUCCESS,user:t}}(e)),t&&t()}),(function(t){n(function(t){return{type:r.A.UPDATE_FAILURE,error:t}}(t.toString()))})):console.log("No user logged in. Cannot Update.")}}var g=n(4913),y=n(64296),v=n(8270),S=n(55277),w=function(){function t(e){(0,g.Z)(this,t),this.tick=e,this.interval=null,this.paused=!0}return(0,y.Z)(t,[{key:"start",value:function(){var t=this;this.paused=!1,this.interval=(0,S.rz)((function(){t.tick++}),50)}},{key:"pause",value:function(){this.paused=!0,(0,S.WZ)(this.interval)}},{key:"delayTick",value:function(){var t=this;this.pause(),(0,S.l1)((function(){t.start(),console.log("Delay Ended")}),50)}}]),t}(),k=n(13974),b=n.n(k),E=n(30600),O=n.n(E);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){(0,v.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T=function(t){W=new(O())(t.seed),(R=new w(t.tick+5)).start(),N.player=_(t.playerData.player),N.enemy=_(t.playerData.enemy),G={effects:[],players:N},N.player.items.forEach((function(t){"none"!=t.component&&G.effects.push(t)}))},U=function(t,e){var n=R.tick;L[n]||(L[n]=[]),L[n].push({data:t,timestamp:e})},C=function(t){if(L[t.tick])for(var e=L[t.tick].length,n=0;n<e;n++){if(0==L[t.tick].length)return void delete L[t.tick];if(L[t.tick][n].timestamp==t.timestamp){if(null==L[t.tick][n].data.player)return;var r=L[t.tick][n].data.player;b().isEqual(r.playerData,t.player.playerData)?(L[t.tick].splice(n,1),n--,console.log("%c Prediction Correct","color: #2df702;")):Z(r.playerData,t.player.playerData)}}},D=function(t){Object.assign(N.player,t.player),Object.assign(N.enemy,t.enemy)},x=function(t){var e,n,r=N.player,a=N.enemy;switch(t.action){case"Start Attack":return r.flagAttack(!0),r.doCharge(!1),e=r.startAttack(t),A({},z(r,a,e,null,t,"owner"));case"Attack":return n="None"!=(e=r.doAttack()).action?a.damagePlayer(e.damage):{action:"None"},r.flagAttack(!1),A({},z(r,a,e,n,t,"owner"));case"Start Combo":return r.doCombo(!0),e=r.startAttack(t),A({},z(r,a,e,null,t,"owner"));case"Combo":return n="None"!=(e=r.doAttack()).action?a.damagePlayer(e.damage):{action:"None"},r.doCombo(!1),A({},z(r,a,e,n,t,"owner"));case"Stop Attack":return r.flagAttack(!1),r.doCombo(!1),A({},z(r,a,e={action:"Stop Attack"},null,t,"owner"));case"Guard":return r.doGuard(t),A({},z(r,a,e={action:"Guard"},null,t,"owner"));case"Charge":return r.doCharge(t),A({},z(r,a,e={action:"Charge"},null,t,"owner"));case"Trigger Item":return e=r.doTriggerItem(t),A({},z(r,a,e,null,t,"owner"));case"Regen Start":return r.doRegen(t),A({},z(r,a,e={action:"Regen Start"},null,t,"owner"));case"Regen End":console.log("FrontEnd just finished regen it took ".concat(t.time,"ms"))}},j=function(t){console.log("Enemy Action:"),console.log(t);var e=B("enemy"),n=B("owner");Object.assign(e,t.enemy.playerData),Object.assign(n,t.player.playerData)},I=function(){return R},R={},N={},G={},W=null,L={};function Z(t,e){for(var n in e)if(e[n]!=t[n])if("items"==n)for(var r in e.items)e[n][r].name!=t[n][r].name&&console.log("%c Prediction incorrect. Item ".concat(r," is different"),"color: red;");else if("attackWeights"==n)for(var a in e.attackWeights)e[n][a]!=t[n][a]&&console.log("%c Prediction incorrect. Attack weight ".concat(a," is different"),"color: red;");else{if("weapon"==n)continue;console.log("%c Prediction incorrect. ".concat(n," is different"),"color: red;")}}function _(t){return new J(t)}function z(t,e,n,r,a,i){if("owner"==i)return{tick:a.tick,timestamp:a.timestamp,player:{actionData:n,playerData:t.getPlayerData()},enemy:{actionData:r,playerData:e.getPlayerData()}}}var J=function(){function t(e){(0,g.Z)(this,t),(0,v.Z)(this,"isGuarding",!1),(0,v.Z)(this,"storedCharge",0),(0,v.Z)(this,"speed",2),(0,v.Z)(this,"maxAttack",2),(0,v.Z)(this,"boostAttack",0),(0,v.Z)(this,"boostPoise",0),(0,v.Z)(this,"boostHealth",0),(0,v.Z)(this,"boostSpeed",0),this.items=e.items,this.isAttacking=!1,this.isCharging=!1,this.attackWeights=e.attackWeights,this.maxHealth=e.maxHealth,this.maxStamina=e.maxStamina,this.maxPoise=e.maxPoise,this.power=e.power,this.speed=e.speed,this.dexterity=e.dexterity,this.currHealth=e.currHealth,this.currStamina=e.currStamina,this.currPoise=e.currPoise,this.weapon=e.weapon,this.combo=!1,this.name=e.name}return(0,y.Z)(t,[{key:"getPlayerData",value:function(){return{items:this.items,attackWeights:this.attackWeights,isAttacking:this.isAttacking,combo:this.combo,isCharging:this.isCharging,isGuarding:this.isGuarding,maxHealth:this.maxHealth,maxStamina:this.maxStamina,maxPoise:this.maxPoise,currHealth:this.currHealth,currStamina:this.currStamina,currPoise:this.currPoise,name:this.name,power:this.power,dexterity:this.dexterity,speed:this.speed,weapon:this.weapon,boostAttack:this.boostAttack,boostPoise:this.boostPoise,boostHealth:this.boostHealth,boostSpeed:this.boostSpeed}}},{key:"reset",value:function(){this.isAttacking=!1,this.isCharging=!1,this.currHealth=this.maxHealth,this.currStamina=this.maxStamina,this.currPoise=this.maxPoise,this.combo=!1}},{key:"startAttack",value:function(t){var e,n=Date.now()-t.time;if(console.log("It took ".concat(n,"ms to start attack")),console.log("Client Stamina: ".concat(t.stamina," Server Stamina: ").concat(this.currStamina)),this.currStamina=t.stamina,this.currStamina>5){t.charge=(e=t.charge/.05)>=19?4:e>=15?3:e>=10?2:e>=5?1:0;for(var r=this.maxStamina/4;this.currStamina-(r*t.charge-5)<=0;)t.charge--;return this.storedCharge=t.charge,this.storedCharge<=0&&(r=0),this.currStamina-=5+r*t.charge,{action:"Start Attack",charge:this.storedCharge,message:this.currStamina<5?"Stamina Empty":"None"}}return this.flagAttack(!1),this.doCombo(!1),{action:"None",message:"No Stamina"}}},{key:"doAttack",value:function(){if(this.currStamina>0||this.storedCharge>=1){this.currAction="Attack",H();var t=(e=this,n=W(),r=e.maxAttack+e.boostAttack,(n<e.attackWeights.crit?r+.5*r:n<e.attackWeights.miss?0:n<=e.attackWeights.hit||n>e.attackWeights.hit?(a=r/2,i=r,Math.floor(W()*(i-a+1)+a)):0)+2*this.storedCharge);return{action:"Attack",doCombo:this.combo,damage:t}}return{action:"None",message:"No Stamina"};var e,n,r,a,i}},{key:"doCombo",value:function(t){this.combo=!!t}},{key:"flagAttack",value:function(t){this.isAttacking=!!t}},{key:"doGuard",value:function(t){this.currPoise=t.localPoise,t.switch&&this.currPoise>5?this.isGuarding=!0:this.isGuarding=!1}},{key:"doCharge",value:function(t){t.switch&&this.currStamina>this.maxStamina/4?(console.log("Client Stamina: ".concat(t.stamina," Server Stamina: ").concat(this.currStamina)),this.currStamina=t.stamina,this.isCharging=!0):this.isCharging=!1}},{key:"damagePlayer",value:function(t){return this.isGuarding?(this.lastDealt=t,this.currAction="Block",H(),this.currPoise-=this.lastDealt,this.currPoise<=5?(this.isGuarding=!1,this.damagePlayer(-1*this.currPoise),void(this.currPoise=0)):{action:"Blocked",percent:(this.maxPoise-this.currPoise)/this.maxPoise*100,damage:this.lastDealt}):(this.currHealth-=t,this.currAction="Damage",H(),{action:"Damaged",damage:t})}},{key:"doRegen",value:function(t){null!=t.currStamina&&F(this,"Stamina"),null!=t.currPoise&&F(this,"Poise")}},{key:"doTriggerItem",value:function(t){var e=function(t,e){var n=G.effects.find((function(t){return t.name==e.item})),r=B(n.constraints.target),a=!1,i=[];return n.constraints.conditions.forEach((function(t){a=V(t,r),i.push(function(t){var e="";switch(t.target){case"player":e+="When you";break;case"enemy":e+="When the Enemy";break;default:e+="When "}switch("currAction"===t.variable?e+=" enter the ".concat(t.value," state."):("player"==t.target?e+="r ":e+="'s ",e+="".concat(M(t.variable)," is ")),t.compare){case">":case">=":e+="greater than ";break;case"<":e+="less than ";break;case"<=":e+="less than  ";break;case"==":default:e+="equal to ";break;case"!=":e+="not equal to "}return"normal"==t.type?e+=M(t.value)+".":"percentage"==t.type&&(e+=t.value+"% of "+M(t.variable)+"."),e}(t))})),"consumable"==n.constraints.type&&a?X[n.component](n,r,t):"constant"!=n.constraints.type&&a?void 0:(n.active=!0,console.log("".concat(e.item," will activate:")),i.forEach((function(t){console.log(t)})),i)}(this,t);return Array.isArray(e)?{action:"Item Response",item:t,type:"conditions",conditions:e}:{action:"Item Response",item:t,type:"value",changedValues:e}}}]),t}();function F(t,e){if(!t.isAttacking&&!t.combo&&!t.isCharging){var n="Stamina"===e?10:20,r=t["curr".concat(e)],a=t["max".concat(e)];r<=0&&(r=t["curr".concat(e)]=1);var i=(a-r)/(1e3*(n-n*r/a)/50),o=Date.now();(0,S.WZ)(t["regen".concat(e)]),t["regen".concat(e)]=(0,S.rz)((function(){if(t["curr".concat(e)]<t["max".concat(e)]&&!t.isAttacking&&!t.combo&&!t.isCharging)t["curr".concat(e)]+=i;else if(t["curr".concat(e)]>=t["max".concat(e)]){var n=Date.now()-o;console.log("BackEnd just finished regen it took ".concat(n,"ms")),(0,S.WZ)(t["regen".concat(e)])}else(0,S.WZ)(t["regen".concat(e)]),console.log("Regen stopped because player is attacking"),console.log("Regen value reached: "+t["curr".concat(e)])}),50)}}function H(){G.effects.forEach((function(t){var e=B(t.constraints.target);if("ability"==t.constraints.type&&t.compEffect==e.currAction){var n=t.constraints.conditions,r="none"==n[0];if(!r)for(var a=0;a<n.length&&(r=V(B(n[a].target),t));a++);r&&!t.active?(e[t.constraints.effect.variable]+=t.constraints.effect.value,t.active=!0):!r&&t.active&&(t.active=!1,e[t.constraints.effect.variable]-=t.constraints.effect.value)}}))}function B(t){return"enemy"==t?N.enemy:N.player}function M(t){var e="";if(t.includes("curr")?e+="Current ":t.includes("max")?e+="Maximum ":t.includes("boost")?e+="Boosted ":e=t,e!=t){var n=t.replace("curr","").replace("max","");e+=n.charAt(0).toUpperCase()+n.slice(1)}return e}function V(t,e){var n,r=!1,a=t.type,i=e[t.variable],o=t.value;switch("currHealth"!=t.variable&&"currPoise"!=t.variable&&"currStamina"!=t.variable||(n=e["max"+t.variable.replace("curr","")]),t.compare){case">":n&&"percentage"==a?r=i>n*o:n&&"normal"==a?r=i>n:"percentage"==a?r=i>i*o:"normal"==a&&(r=i>o);break;case"<":n&&"percentage"==a?r=i<n*o:n&&"normal"==a?r=i<n:"percentage"==a?r=i<i*o:"normal"==a&&(r=i<o);break;case">=":n&&"percentage"==a?r=i>=n*o:n&&"normal"==a?r=i>=n:"percentage"==a?r=i>=i*o:"normal"==a&&(r=i>=o);break;case"<=":n&&"percentage"==a?r=i<=n*o:n&&"normal"==a?r=i<=n:"percentage"==a?r=i<=i*o:"normal"==a&&(r=i<=o);break;case"==":n?r=i==n*o:"normal"==a&&(r=i==o);break;case"!=":n?r=i!=n*o:"normal"==a&&(r=i!=o)}return r}var q,$,K,Q,Y,X={probMod:function(t,e){switch(t.compEffect){case"attackWeight":!function(t,e,n){switch(n=t.attackWeights[e]*n,t.attackWeights[e]+=n,t.attackWeights[e]<0&&(t.attackWeights[e]=0),e){case"miss":case"crit":t.attackWeights.hit-=n;break;case"hit":t.attackWeights.miss-=n}}(e,t.constraints.effect.variable,t.constraints.effect.value);break;case"abilityChance":t.effSearch}},statusMod:function(t,e,n){var r=t.constraints.effect,a=t.constraints.sideEffects,i=[];if("percentage"==r.type){var o=e[r.variable];e[r.variable]+=o*r.value,i.push({name:r.variable,adjusted:e[r.variable]})}else"normal"==r.type&&(e[r.variable]+=r.value,i.push({name:r.variable,adjusted:e[r.variable]}));return"none"!=a[0]&&a.array.forEach((function(t){var e=B(n,t.target);if("percentage"==t.type){var r=e[t.variable];e[t.variable]+=r*t.value,i.push({name:t.variable,adjusted:e[t.variable]})}else"normal"==t.type&&(e[t.variable]+=t.value,i.push({name:t.variable,adjusted:e[t.variable]}))})),i}},tt={deusConnect:function(){return new Promise((function(t,e){var n="".concat(h().apiUrl,"/battle"),r=JSON.parse(localStorage.getItem("user")).token;$=f.ZP.connect(n,{extraHeaders:{Authorization:"Bearer ".concat(r)}}),console.log("Connecting to Deus Api..."),$.on("authorized",(function(t){console.log("LOGGED ON TO DEUS"),console.log(t),$.emit("authorized"),q=!0})),$.on("unauthorized",(function(){e("unauthorized"),console.log("User token is either expired or invalid")})),$.on("Joined",(function(e){T(e),K=e.matchId,Q=I(),console.log("Match has started with ID: "+K),nt||(nt=new et(500)),rt=setInterval((function(){var t=Date.now();$.volatile.emit("Latency Ping",K,(function(e){var n=Date.now()-t;nt.change(n/2);var r=Q.tick;r>e.tick+nt.tickLatency+4?(at++,r>e.tick+20&&(Q.tick=e.tick+nt.tickLatency+1,console.log("Tick Corrected")),at>4?(console.log("Tick Delayed"),console.log("ClientTick: ".concat(r," ServerTick: ").concat(e.tick)),Q.delayTick()):at++):r<e.tick+nt.tickLatency?(at++,console.log("Tick Advanced"),Q.tick=e.tick+nt.tickLatency+at,D(e.snapshot)):at=0}))}),1e3),t(e.playerData)})),$.on("disconnect",(function(t){console.log("LOGGED OFF OF DEUS"),q=!1,clearInterval(rt),nt=null,e(t)}))}))},deusAction:function(t){return new Promise((function(e,n){if($&&q){t.matchID=K,t.owner=JSON.parse(localStorage.getItem("user")).username,t.tick=I().tick,t.timestamp=(new Date).toLocaleString(),$.emit("Action",t,(function(t){"None"!=t.player.action&&(console.log("Server Return: "),console.log(t),C(t))}));var r=x(t);null!=r&&r.player.actionData&&(U(r,t.timestamp),console.log("Client Prediction: "),console.log(r)),e(r)}}))},deusPush:function(){return new Promise((function(t,e){($=$.removeListener("Push")).on("Push",(function(e){j(e);var n=(new Date).getTime(),r=n-new Date(e.timestamp),a=n-new Date(e.serverstamp);console.log("Server to Client: "+a+"ms"),e.enemy.timeDiff=r,t(e)})),Y=function(){return t("reset")}}))},deusKillPush:function(){Y()},deusMatchCheck:function(){return new Promise((function(t,e){$.on("End",(function(e){console.log(e),q=!1,t(e)}))}))},deusStart:function(t){return function(e){localStorage.getItem("user")?s.TH.deusStart().then((function(n){e(function(t){return{type:"GETDEUS_INITIAL",data:t}}(n)),t&&t()}),(function(t){e(function(t){return{type:"GETDEUS_FAILURE",error:t}}(t.toString()))})):console.log("No user logged in. Cannot Update.")}},deusForge:it,changeWeapon:function(t,e,n){s.TH.changeWeapon(t,e).then((function(){u.h.dispatch(it((function(){return n()})))}))}},et=function(){function t(e){(0,g.Z)(this,t),this.value=e,this.tickLatency=this.value>50?Math.floor(e/50):1}return(0,y.Z)(t,[{key:"change",value:function(t){this.value=t,this.tickLatency=this.value>50?Math.floor(t/50):1}}]),t}(),nt=null,rt=null,at=0;function it(t){return function(e){localStorage.getItem("user")?s.TH.deusForge().then((function(n){e(function(t){return{type:"GETDEUS_GETFORGE",data:t}}(n)),t&&t()}),(function(t){e(function(t){return{type:"GETDEUS_FAILURE",error:t}}(t.toString()))})):console.log("No user logged in. Cannot Update.")}}var ot=n(97195)},68227:(t,e,n)=>{"use strict";n.d(e,{d$:()=>P,TH:()=>W,W4:()=>f});var r=n(8270),a=n(54390),i=n(84264),o=n.n(i),c=n(91974),s=n.n(c),u=n(43267);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={login:function(t,e){return p.apply(this,arguments)},twitchHandler:function(t){return m.apply(this,arguments)},updateLocalUser:function(){return d.apply(this,arguments)},logout:g,resetPassword:function(t,e){return y.apply(this,arguments)},register:function(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(s().apiUrl,"/users/register"),e).then(b)},getEvents:function(){var t={method:"GET",headers:(0,u.zl)()};return fetch("".concat(s().apiUrl,"/events"),t).then(b).then((function(t){return t}))},getVideoData:function(t){return v.apply(this,arguments)},runEvent:function(t){var e={method:"POST",headers:h(h({},(0,u.zl)()),{},{"Content-Type":"application/json"}),body:JSON.stringify({eventname:t})};return fetch("".concat(s().apiUrl,"/events/run"),e).then(b).then((function(t){return t}))},checkBalance:function(t){var e={method:"GET",headers:(0,u.zl)()};return fetch("".concat(s().apiUrl,"/users/balance/").concat(t),e).then(b).then((function(t){return t}))},updateRank:function(){return S.apply(this,arguments)},adminVerify:function(t){return w.apply(this,arguments)},userVerify:function(t){return k.apply(this,arguments)}};function p(){return(p=(0,a.Z)(o().mark((function t(e,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})},t.abrupt("return",fetch("".concat(s().apiUrl,"/users/authenticate"),r).then(b).then((function(t){return localStorage.setItem("user",JSON.stringify(t)),t})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=(0,a.Z)(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"GET",headers:(0,u.zl)()},t.next=3,fetch("".concat(s().apiUrl,"/users/update"),e).then(b).then((function(t){var e=JSON.stringify(t);return localStorage.setItem("user",e),JSON.parse(localStorage.getItem("user"))})).catch((function(){return!1}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessCode:e})},t.abrupt("return",fetch("".concat(s().apiUrl,"/users/twitch"),n).then(b).then((function(t){return localStorage.setItem("user",JSON.stringify(t.user)),console.log(t),"Login Successful"})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){localStorage.removeItem("user"),location.pathname.includes("/account")}function y(){return(y=(0,a.Z)(o().mark((function t(e,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:h(h({},(0,u.zl)()),{},{"Content-Type":"application/json"}),body:JSON.stringify({password:e,newPassword:n})},t.abrupt("return",fetch("".concat(s().apiUrl,"/users/password"),r).then(b).then((function(t){return t})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:(0,u.zl)()},t.abrupt("return",fetch("".concat(s().apiUrl,"/videos/").concat(e),n).then(b).then((function(t){return t})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=(0,a.Z)(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"GET",headers:(0,u.zl)()},t.next=3,fetch("".concat(s().apiUrl,"/users/rank"),e).then(b).then((function(t){return t}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:(0,u.zl)()},t.abrupt("return",fetch("".concat(s().apiUrl,"/admin/"),n).then(b).then((function(t){return t})).catch((function(){return!1})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:(0,u.zl)()},t.abrupt("return",fetch("".concat(s().apiUrl,"/users/"),n).then(b).then((function(t){return t})).catch((function(){return!1})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return t.text().then((function(e){var n=e&&JSON.parse(e);if(!t.ok){401===t.status&&(g(),console.log("Error 401!"));var r=n&&n.message||t.statusText;return Promise.reject(r)}return n}))}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={getAllUsers:function(){var t={method:"GET",headers:(0,u.zl)()};return fetch("".concat(s().apiUrl,"/admin/users/list/all-data"),t).then(R).then((function(t){return{allData:t[1]}}))},getSortedUsers:function(t){return A.apply(this,arguments)},getSortedVideos:function(t){return T.apply(this,arguments)},getSettings:function(){return j.apply(this,arguments)},updateSettings:function(t){return x.apply(this,arguments)},getUser:function(t){return U.apply(this,arguments)},updateUser:function(t){return C.apply(this,arguments)},addUser:function(t){return D.apply(this,arguments)},deleteUser:function(t){return I.apply(this,arguments)}};function A(){return(A=(0,a.Z)(o().mark((function t(e){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:(0,u.zl)()},t.next=3,fetch("".concat(s().apiUrl,"/admin/users/list/data/").concat(new URLSearchParams(e)),n).then(R).then((function(t){return{params:e,data:t[1].users,totalPages:t[1].total}}));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=(0,a.Z)(o().mark((function t(e){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:(0,u.zl)()},t.next=3,fetch("".concat(s().apiUrl,"/admin/videos/list/").concat(new URLSearchParams(e)),n).then(R).then((function(t){return{data:t[1].videos,allData:t[1].allData,total:t[1].total,params:e}}));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return(U=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:(0,u.zl)()},t.next=3,fetch("".concat(s().apiUrl,"/admin/users/").concat(e),n).then(R);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"PUT",headers:O(O({},(0,u.zl)()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)},t.next=3,fetch("".concat(s().apiUrl,"/admin/users/update"),n).then(R);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return(D=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"POST",headers:O(O({},(0,u.zl)()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)},t.abrupt("return",fetch("".concat(s().apiUrl,"/admin/users/add-user"),n).then(R));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"POST",headers:O(O({},(0,u.zl)()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)},t.abrupt("return",fetch("".concat(s().apiUrl,"/admin/settings"),n).then(R));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=(0,a.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"GET",headers:(0,u.zl)()},t.abrupt("return",fetch("".concat(s().apiUrl,"/admin/settings"),e).then(R).then((function(t){return{api:t[1].api,accounts:t[1].accounts,videoParam:t[1].videoParam,eventParam:t[1].eventParam}})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(){return(I=(0,a.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"DELETE",headers:(0,u.zl)()},t.next=3,fetch("".concat(s().apiUrl,"/admin/users/delete/").concat(e),n).then(R);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return t.text().then((function(e){var n=e&&JSON.parse(e);if(!t.ok){401===t.status&&console.log("Error 401!");var r=n&&n.message||t.statusText;return Promise.reject(r)}return n}))}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var W={deusStart:function(){return L.apply(this,arguments)},deusForge:function(){return Z.apply(this,arguments)},changeWeapon:function(t,e){return _.apply(this,arguments)}};function L(){return(L=(0,a.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"POST",headers:(0,u.zl)()},t.abrupt("return",fetch("".concat(s().apiUrl,"/deus/start"),e).then(z).then((function(t){return{player:t.player,weapon:t.weapon,items:t.items}})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return(Z=(0,a.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"GET",headers:(0,u.zl)()},t.abrupt("return",fetch("".concat(s().apiUrl,"/deus/forge"),e).then(z).then((function(t){return{forgeInv:t.forgeInv,weapon:t.weapon}})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){return(_=(0,a.Z)(o().mark((function t(e,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:G(G({},(0,u.zl)()),{},{"Content-Type":"application/json"}),body:JSON.stringify({currentPartId:e,newPartId:n})},t.abrupt("return",fetch("".concat(s().apiUrl,"/deus/forge/equip"),r).then(z));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(t){return t.text().then((function(e){var n=e&&JSON.parse(e);if(!t.ok){401===t.status&&console.log("Error 401!");var r=n&&n.message||t.statusText;return Promise.reject(r)}return n}))}},75042:()=>{}}]);